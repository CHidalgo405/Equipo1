<!doctype html>
<html lang="en">
<head>
    <title>Power Clean</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap -->
    <link href="CSS/bootstrap.css" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <!-- CSS GENERAL -->
    <link rel="stylesheet" href="CSS/styles.css" />
    <!-- Letra -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Edu+AU+VIC+WA+NT+Hand:wght@400..700&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>
</head>
<body style="height: 100%; min-height: 100vh;" id="iniciosesion">

    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid" id="navegacion">
            <a class="navbar-brand text-white" href="index.HTML">
                <img src="IMG/POWER CLEAN-2.jpg" alt="Logo" height="70" class="d-inline-block align-text-top">
              </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarCenteredExample" aria-controls="navbarCenteredExample" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarCenteredExample">
                <ul class="navbar-nav mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="nosotros.html">Nosotros</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="productos.html">Productos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contactanos.html">Contáctanos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="iniciosesion.html">Inicio de sesión</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <br>
    <br>

    <div id="arriba"
        class="col-md-9 ms-sm-auto col-lg-1 px-md-4 d-flex justify-content-end align-items-center pt-3 pb-2 mb-20 border-bottom">
        <a class="btn btn-outline-danger mt-4" href="iniciosesion.html" role="button">SALIR</a>
    </div>

    <section class="vh-80%">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                    <div class="card animate__animated animate__zoomInDown" id="sesion">
                        <div class="card-body text-center">
                            <div class="mb-md-5 mt-md-4 pb-5">
                                <h2 class="fw-bold mb-2 text-uppercase">Registro</h2>
                                <dotlottie-player src="https://lottie.host/d8180aa4-77ed-41ec-84f6-4428a986fde6/JPiJiccSdS.json" background="transparent" speed="1" id="animacion1" loop autoplay></dotlottie-player>
                                <form id="registerForm">
                                    <div class="form-group">
                                        <label for="username">Nombre de usuario</label>
                                        <div class="input-group has-validation">
                                            <span class="input-group-text" id="inputGroupPrepend3">@</span>
                                            <input type="text" class="form-control" id="username" placeholder="Introduce nombre de usuario" required>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="form-group">
                                        <label for="email">Correo electrónico</label>
                                        <div class="input-group has-validation">
                                            <span class="input-group-text" id="inputGroupPrepend3">@</span>
                                            <input type="email" class="form-control" id="email" placeholder="Introduce correo electrónico" required>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="form-group">
                                        <label for="password">Contraseña</label>
                                        <div class="input-group has-validation">
                                            <span class="input-group-text" id="inputGroupPrepend3">??</span>
                                            <input type="password" class="form-control" id="password" placeholder="Introduce contraseña" required>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="d-grid gap-2">
                                        <button type="submit" class="btn btn-dark btn-lg">Registrarse</button>
                                    </div>
                                    <div id="errorMessage" class="mt-3 text-danger"></div>
                                </form>
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="JS/bootstrap.js"></script>
    <script>
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                const response = await fetch('http://localhost:3000/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, email, password })
                });

                if (!response.ok) {
                    throw new Error('Error en la solicitud');
                }

                const data = await response.json();
                if (data.error) {
                    document.getElementById('errorMessage').innerText = data.error;
                } else {
                    // Handle success (e.g., redirect to a new page)
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('errorMessage').innerText = 'Error en la solicitud';
            }
        });
    </script>
</body>
</html>
